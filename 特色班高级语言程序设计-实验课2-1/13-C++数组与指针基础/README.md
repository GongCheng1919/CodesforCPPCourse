## 数组与指针

在 05 一节中已对数组与指针进行详细阐释，此处不再赘述，如有需要，可以跳转 []

## 指针与指针

#### 指向指针的指针

首先必须记住的一点，指针也是变量，也需要内存来存储

因此，我们可以定义指向指针的指针，即一个指针变量存储了另一个指针 变量的地址

指向指针的指针在某些情况下非常有用，例如在函数中通过指针修改指针的值等

#### 常量指针

在 C/C++ 中，我们可以使用 _`const`_ 限制一个变量或者指针的值不能被修 改，从而保护变量或者指针的值不被误操作更改

当我们使用 _`const`_ 关键字修饰一个指针变量时，我们可以通过这个指针来访问变量的值，但是不能通过这个指针来修改变量的值。因此，这个指针被称为指向常量的指针。我们可以通过以下方式来声明一个指向常量的指针： 

```cpp
const int* ptr; //指向整型常量的指针
```

这里的 _`const`_ 关键字表示指针所指向的内存中的值是常量，注意是指向 的内存中的值，不是指针本身，不能被修改。

指向的内存中的值不可以更改，但是指针的值可以更改

#### 指针常量

我们还可以使用指针本身是常量的方式来定义一个指向常量的指针，也就是不能通过这个指针来修改指向的内存地址。例如： 

```cpp
int num = 10; 
int* const ptr = # //指针本身是常量，指向整型变量 num 
```

这里的 _`const`_ 关键字表示指针 **本身是常量**，不能被修改。

指针常量的值不可更改，但指向的内存地址可以更改。

指针 `ptr` 被声明为指针常量，它的值不能被更改，一旦指向了 `num1`，就不能指向其他变量。但是，可以通过解引用操作符来修改指针所指向的内存地址中的值

通常的数组名指代了数组的起始地址，该数组名通常是一个指针常量不可更改，但是其指向的连续内存空间是可更改的

## 指针与数组

#### 指向数组元素的指针

如果指针变量是指向数组的，例如： 

```cpp
int a[20]; int *pa=a;
```

则指针 `pa` 可以有限制地进行 `+、-` 运算或增量 `++` 减量 `--` 运算。这时，可以用 3 种方式表示该数组的元素：

- 下标变量的形式：`a[0]，a[1]，a[2]，a[3]，…，a[19]`
- 用数组名 `a`（一个常量指针）：`*a，*(a+1)，*(a+2)，*(a+3)，…` 
- 用指针变量 `pa（=a）：*pa，*(pa+1)，*(pa+2)，*(pa+3)，…` 

当然 3 种方式都可以，不过应注意的是，这里 `pa` 是变量，它可能是变化的，例如： 
`pa+=3;` 执行后，`pa` 已指向 `a[3]`，即 `*pa` 为 `a[3]`。 
`pa--;`  执行后，`pa` 已指向 `a[2]`

###### 多维数组的情况

当数据为多维数组时，上述对应关系为： 

```cpp
int a[2][3]; 
int *pa = a[0]; //或 int * pa = &a[0][0]; 
```

注意：在二维数组 `a` 中，包括两个一维数组分量，其中，一维数组 `a[0]` 等同于 `&a[0][0]`，所以，`*a[0]` 等同于 `*(&a[0][0])` 即 `a[0][0]`。 

可用 3 种方式表示其 6 个元素：
- `a[0][0]、a[0][1]、a[0][2]、a[1][0]、a[1][1]、a[1][2]`
- `*a[0]、*(a[0] +1)、*(a[0]+2)、*(a[0]+3)、*(a[0]+4)、*(a[0]+5)`
- `*pa、*(pa+1)、*(pa+2)、*(pa+3)、*(pa+4)、*(pa+5)`

指针与数组都是导出类型，它们都是在其他类型的基础上被定义的。那么它们互相之间是可以互相导出的

```cpp
int n[10]; 
int *pn=n; 
```

则指针 `pn` 指向数组 `n` 的首元 `n[0]`。在这里 `pn=n` 与 `pn=&n[0];` 起相同的效果，因为数组名就是一个指向其首元的一个指针常量

把数组作为整体，称指向这样一个整体的指针为指向数组的指针，对于这类指针，其说明语句格式

```cpp
<类型名>(*<指针变量名>)[<数组元素数>]; 
float A[2][4]; 
float (*pa) [4]; 
float *p=&A[0][0]; 
pa=A; 
```

这时指针 `pa` 指向一维数组 `A[0]`（`A[0]` 有 4 个元素），执行增量运算 `pa++;` 后，`pa` 指向一维数组 `A[1]`，数组 `A[1]` 的 4 个元素

指针 `p` 和指针 `pa` 指向的地址是一样的，但 `p` 是指向一个整型下标变量 `A[0][0]`， 而 `pa` 则是指向整型一维数组 `A[0]`，前者占内存空间可能是 4 bytes，而后者则占 16 bytes

虽然指针变量的内容都是地址，但指针变量的类型（指向的对象类型）决定了该地址指向的存储区的大小

#### 指针数组

由指针组成的数组，常常在程序中出现，其说明格式为：

```cpp
<类型名>*<数组名>[<元素数>] ; 
```

`n` 维指针数组为： 

```cpp
<类型名>*<数组名>[<元素数 1>][<元素数 2>]…[<元素数 n>]; 
```

直观的区别是：它比一般数组增加了符号 `*`
它比指向数组的指针少了一对括号`()`
例如： 
```cpp
int a，b，c，d，A[2][4]; 
int *p1[4]={&a,&b,&c,&d}; 
int *p2[2]={A[0],A[1]};
```
