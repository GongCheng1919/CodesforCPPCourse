# C++普通语句与流程控制
## 语句

语句是构成程序的基本单元，它表示一个完整的操作或动作

在 C++ 中，语句可以是一个表达式、控制流语句、声明语句、跳转语句等

语句通常以分号 ; 结尾。

```cpp
// 声明语句
int x = 42;
// 控制流语句（条件语句）
if (x > 0){
	std::cout << "Positive" << std::endl;
}
// 控制流语句（循环语句）
for(int i = 0; i < 5; i++){
	std::cout << i << " ";
}
```
***
#### 简单语句

简单语句是最基本的语句形式，它表示一个 **单一** 的操作或指令

简单语句通常执行一些基本的操作，例如赋值、函数调用、增减操作等

简单语句可以独立存在，也可以作为更复杂的语句的组成部分

***
#### 空语句

空语句是一个空的语句块，**只包含一个分号** `;`，没有其他的代码内容

空语句是特殊的简单语句，表示该语句为空，**没有实际的操作或指令**，它在语法上是一个有效的语句，但不会执行任何实际的操作

空语句作用在于一些特定的编程场景，在许多复杂语句中起特殊作用

***
## 复合语句

复合语句，又称为块语句或程序块，是若干语句的组合，用花括号 `{}` 括起来（注意不再是以 `;` 结尾而是以 `}` 结尾），其格式为：

```cpp
{
	// 这里可以包含多个语句
	statement1;
	statement2;
	// ...
}
```

复合语句可以包含任意数量个语句，在逻辑或概念上，复合语句总是作为 一个语句出现
***
#### 语句嵌套

构成复合语句的 S_i 可能是说明语句、表达式语句、控制语句、也可能是一个复合语句的嵌套

复合语句允许将多个语句组合在一起，形成逻辑上的代码块，用于实现复杂的操作、控制流结构和局部作用域。复合语句可以出现在程序任何地方
***
## 控制语句

控制语句可用来改变或打破程序中按语句的先后次序顺序执行的规律，分类如下

控制语句
	条件控制语句
		分支语句
			[if 分支语句]
			[switch 分支语句]
		循环语句
			[for 语句]
			[while 语句]
			[do...while 语句]
	无条件控制语句
		break 语句
		continue 语句
		return 语句
		goto 语句

#### _`if`_ 分支语句

_`if`_ 语句也称条件语句或如果语句，它有两种形式

```cpp
if ( 表达式 <E> ) <语句 S>

if ( 表达式 <E> ) <语句 S_1> else <语句 S_2>

if( 表达式 <E_1> ) <语句 S_1>
    else if( 表达式 <E_2> ) <语句 S_2>
    else if( 表达式 <E_3> ) <语句 S_3>
    ……
    else if( 表达式 <E_m> ) <语句 S_m>
    else <语句 S_m+1>
```

- 表达式 E：在 _`if`_ 后面，用（）括起来，该表达式应为 _`bool`_ 型的[逻辑表达式]， _`int`_ 型、_`long`_ 型、_`char`_ 型以及 _`enum`_ 型表达式都是合法的，其值等于 0 为假， 非 0 为真
- 语句 S：可以是任何类型的语句，也可以是块语句。语句S1、语句S2 同 S
- 关键字 _`else`_：出现在第 2 类 _`if`_ 语句中，它表示当表达式 E 取假值（0）时 跳过语句 S1，执行 S2

严格地说，表达式 E 应为一个布尔表达式，其值应为 _`false`_ 和 _`true`_。C++ 语言对 E 的要求较松，比较方便灵活，所以其他类型的表达式也能作为表达式 E

_`if`_ 语句中的语句 S、S_1、S_2 也可以是 _`if`_ 语句，即 _`if`_ 语句的嵌套。 在 _`if`_ 语句嵌套时，C++语言规定，为了避免二义性，每个 _`else`_ 只与其前面 **最近的** **未配对的** _`if`_ 配对

###### 逻辑表达式

逻辑表达式自左而右扫描求解。

逻辑运算符两侧的的运算对象不但可以是 0 和 1，或者是 0 和非 0 的整数，也可以是字符型、浮点型、枚举型或指针型的纯量数据。系统最终以 0 和非 0 来判定它们属于“真”或“假”。

C/C++ 中的逻辑表达式求值具有短路机制：即如果通过第一个操作数已经能够确定表达式的值，不会再对剩余表达式进行计算

#### _`switch`_ 分支语句

_`switch`_ 语句又称开关语句或分情况语句，它是一种多分支语句。其运行顺序如图

![[Pasted image 20241013132142.png]]

其基本格式为：

```cpp
switch( 表达式 <E> ){
	case < 情况常量 C_1 >: < 语句序列 S_1 >
	case < 情况常量 C_2 >: < 语句序列 S_2 >
	...
	case < 情况常量 C_n >: < 语句序列 S_n >
	default: < 语句序列 S_n+1 >
}
```

- 表达式 E：_`int`_ 型、_`char`_ 型及其派生类型和枚举类型的表达式
- 关键字 _`case`_：用来引出一个分支
- 情况常量 C_i：为表达式 E 的一个可能值。当计算表达式 E 的值为 C_i 时，控制 跳过前面的 S_1， … ，S_i-1 语句序列，直接执行语句序列 S_i, … , S_n语句序列

- _`default`_：关键字 _`default`_ 表示当表达式 E 的值不等于已列出的情况常量 C_1，C_2，…，C_n 时，控制直接转向语句序列 S_i+1（跳过 S_1，S_2，…， S_n）。_`default`_ 分支可以缺省，它相当于 S_n+1 为一空语句
- 语句序列 S_1,S_2，…，S_n+1 是 _`switch`_ 语句的各个分支，S_i 可以是任意多个语句的序列

***

表达式 E 和情况常量 C_1，C_2， … ，C_n 应为同一类型， 且 C_1，C_2，…，C_n 互不相同，当需要对表达式 E 的若干不同值对应于同一语句序列时， 可把它们列在一起： 

```cpp
case C_1 ： 
case C_2 ： 
case C_3 ：S3
```

这样就可实现了当表达式取 C_1、C_2 或 C_3 时，都转向语句序列 S_3

***

当表达式 E 取值 C_i 时，控制转到语句序列 S_i（跳过 S_1，S_2，…，S_i-1），在执行完 S_i 之后，**不是跳出整个开关语句**，而是**继续执行**语句序列 S_i+1， … ，S_n，S_n+1，然后再转出开关语句继续执行后面的程序。

如果实际的问题要求程序在执行各情况分支之后，直接跳出开关语句，则开关语句的使用需略作改动，即在每个情况分支的语句序列之后增加一个 _`break`_ 语句

***

一些 Tips: 

各个case标号出现次序不影响执行结果。例如，可以先出现 _`default`_ 标号，再出现 `case ‘D’: …` 然后是 `case ‘B’: …`

每一个 _`case`_ 常量必须互不相同，否则就会出现互相矛盾的现象（对 _`switch`_ 的同一个值，有两种或多种执行方案）

_`case`_ 标号仅起标记的作用

> 如果根据变量在**某范围**内决定程序流的去向，这种情况下用 _`if`_ 语句就比用 _`switch`_ 方便

#### _`for`_ 循环语句

_`for`_ 语句是 C++程序中最常用的、功能最强的循环语句，其执行顺序如图

![[Pasted image 20241013132204.png]]

其格式为： 

```cpp
for（<表达式 E_1>; <表达式 E_2>; <表达式 E_3>）<语句 S>
```

- 表达式 E_1：一般用于为循环控制变量赋初值，故又称初值表达式，但从语法规则看它并不一定是一个赋值表达式
- 表达式 E_2：用于判定循环是否继续，称为条件表达式，E_2 必须是具有整 型值的 _`int`_ 型、_`char`_ 型及其派生类型和枚举类型的表达式
- 表达式 E_3：一般用于循环变量的增（减）值，故称为增量表达式，但从语法规则看它可以是任何表达式语句
- 语句 S：它可以是单个语句，也可以是（在多数情形下）块语句，它是要被循环重复执行的程序段，故又称为循环体

表达式 E_1、E_2、E_3 都可以为空。其中 E_2 为空语句，意味 E_2 永远取值为真，循环体将可能无限循环下去，除非 S 中含有在一定条件下执行跳转的语句

表达式 E_1 只执行一次，不仅可初始化循环变量，也可使用逗号表达式，初始化其他成分

表达式 E_2 和 E_3 在每次执行 S 的前后要分别执行一次，如 果采用逗号表达式的形式，则 E_2、E_3 除了完成判定循环条件 和循环变量增量的功能之外，还可进行其他数据处理

S 可以是空语句，可用于某种延时程序

***
#### _`while`_ 语句

while 语句是一种形式简单的循环语句，它实际上是 _`for`_ 语句 在表达式 E_1 和 E_3 为空的特殊情形。其格式为： 

```cpp
while（<表达式 E>）语句 S 
```

- 表达式 E：用于判定循环是否继续，首先计算 E 的值，为非零整数即为真，执行循环体，循环体执行后再计算 E，直到 E 取 0 值（假）时跳出循环。 
- 语句 S：为循环体

_`for`_ 语句可以无条件改写为 _`while`_ 循环的形式

```cpp
for(<表达式 E_1>; <表达式 E_2>; <表达式 E_3>)
	语句
```
   无条件等价于
```cpp
while <表达式 E_2> {
	语句
	<表达式 E_3>
}
```

> 在循环体中应有使循环趋向于结束的语句
***
#### _`do-while`_ 语句

_`do-while`_ 语句类似于 _`while`_ 语句，只是把循环的判定移至循环体之后，如右图所示，其格式为： 

```cpp
do <语句 S> while (<表达式 E>)；
```
- 语句 S：为循环体。 
- 表达式 E：判定循环是否继续，其值为 真（非 0 整数）时返回执行循环体 S，否则跳出。 

do-while 语句与 while 语句的主要区别是，它的循环体至少被执行一次；而 while 语句首先判断条件，可能一次也不执行就 跳出。（do-while也不是for循环的一种特例）
